<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>منشئ السيرة الذاتية الاحترافي</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        :root {
            --primary-color: #4361ee;
            --primary-light: #4895ef;
            --secondary-color: #3a0ca3;
            --accent-color: #f72585;
            --success-color: #4cc9f0;
            --warning-color: #f8961e;
            --text-color: #2b2d42;
            --text-light: #8d99ae;
            --light-bg: #f8f9fa;
            --white: #ffffff;
            --gray: #adb5bd;
            --light-gray: #e9ecef;
            --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            --hover-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Tajawal', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap');

        body {
            line-height: 1.7;
            color: var(--text-color);
            background-color: var(--light-bg);
            direction: rtl;
            overflow-x: hidden;
        }

        body[dir="ltr"] {
            direction: ltr;
        }

        .container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 0 25px;
        }

        /* الشريط العلوي */
        nav {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            color: var(--text-color);
            padding: 1.2rem 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        nav.scrolled {
            padding: 0.8rem 0;
            box-shadow: 0 5px 25px rgba(0,0,0,0.1);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1300px;
            margin: 0 auto;
            padding: 0 25px;
        }

        nav .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        nav .logo h1 {
            color: var(--primary-color);
            font-size: 1.9rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            list-style: none;
            display: flex;
            gap: 2.5rem;
        }

        .nav-links a {
            color: var(--text-color);
            text-decoration: none;
            transition: all 0.3s;
            padding: 8px 15px;
            border-radius: 30px;
            font-weight: 500;
            position: relative;
        }

        .nav-links a:after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 15px;
            width: 0;
            height: 2px;
            background: var(--primary-color);
            transition: width 0.3s;
        }

        .nav-links a:hover {
            color: var(--primary-color);
        }

        .nav-links a:hover:after {
            width: calc(100% - 30px);
        }

        /* قسم الرئيسية */
        .hero {
            background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
            color: var(--white);
            padding: 120px 0 100px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero:before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgMTIwMCA4MDAiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPjxwYXRoIGQ9Ik0wIDI2MEMxNTAgMjAwIDM1MCAwIDUwMCAyNjBDNjUwIDUyMCA4NTAgMCAxMDAwIDI2MEwxMjAwIDQwMEwxMjAwIDgwMEwwIDgwMFYyNjBaIiBmaWxsPSIjNDk2MWVlIiBmaWxsLW9wYWNpdHk9IjAuMSIvPjwvc3ZnPg==');
            background-size: cover;
            opacity: 0.3;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            margin: 0 auto;
        }

        .hero h2 {
            font-size: 3.2rem;
            margin-bottom: 1.5rem;
            font-weight: 800;
            line-height: 1.2;
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2.5rem;
            opacity: 0.9;
            font-weight: 300;
        }

        .cta-button {
            background: var(--accent-color);
            color: var(--white);
            border: none;
            padding: 16px 40px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            box-shadow: 0 10px 20px rgba(247, 37, 133, 0.3);
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .cta-button:hover {
            background: #e11575;
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(247, 37, 133, 0.4);
        }

        /* قسم المميزات */
        .features {
            padding: 100px 0;
            background-color: var(--white);
        }

        .features h2 {
            text-align: center;
            margin-bottom: 60px;
            color: var(--text-color);
            font-size: 2.5rem;
            font-weight: 800;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 40px;
        }

        .feature-card {
            background: var(--white);
            padding: 40px 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: var(--card-shadow);
            transition: all 0.4s ease;
            border: 1px solid rgba(0,0,0,0.03);
            position: relative;
            overflow: hidden;
        }

        .feature-card:before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--hover-shadow);
        }

        .feature-card i {
            font-size: 3.5rem;
            margin-bottom: 25px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline-block;
        }

        .feature-card h3 {
            color: var(--text-color);
            margin-bottom: 15px;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .feature-card p {
            color: var(--text-light);
            line-height: 1.6;
        }

        /* قسم القوالب */
        .templates-section {
            padding: 100px 0;
            background-color: var(--light-bg);
        }

        .templates-section h2 {
            text-align: center;
            margin-bottom: 60px;
            color: var(--text-color);
            font-size: 2.5rem;
            font-weight: 800;
        }

        .template-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .template-option {
            border: 1px solid #e0e0e0;
            padding: 0;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            overflow: hidden;
            background: var(--white);
            position: relative;
        }

        .template-option:hover, .template-option.active {
            border-color: var(--primary-color);
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .template-option.active {
            border: 2px solid var(--primary-color);
        }

        .template-preview {
            width: 100%;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: bold;
            font-size: 1.2rem;
            position: relative;
            overflow: hidden;
        }

        .modern-preview {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }

        .professional-preview {
            background: linear-gradient(135deg, var(--secondary-color), #2d3748);
        }

        .creative-preview {
            background: linear-gradient(135deg, var(--accent-color), #e67e22);
        }

        .template-content {
            z-index: 2;
            text-align: center;
        }

        .template-content h3 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .template-content p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .template-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--accent-color);
            color: white;
            padding: 5px 12px;
            border-radius: 30px;
            font-size: 0.8rem;
            z-index: 2;
            font-weight: 600;
        }

        .template-info {
            padding: 20px;
        }

        .template-info p {
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--text-color);
        }

        .template-features {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .template-feature {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .template-feature i {
            color: var(--success-color);
            font-size: 0.8rem;
        }

        /* محرر السيرة */
        .cv-builder {
            padding: 100px 0;
            background-color: var(--white);
        }

        .cv-builder h2 {
            text-align: center;
            margin-bottom: 60px;
            color: var(--text-color);
            font-size: 2.5rem;
            font-weight: 800;
        }
        
        .builder-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .cv-completeness {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 15px;
            flex: 1;
            min-width: 300px;
        }
        
        .completeness-text {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .progress-bar {
            height: 10px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            width: 0%;
            transition: width 0.5s;
            border-radius: 10px;
        }

        .builder-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
        }

        @media (max-width: 1100px) {
            .builder-container {
                grid-template-columns: 1fr;
            }
            
            .nav-links {
                gap: 1.5rem;
            }
            
            .hero h2 {
                font-size: 2.5rem;
            }
            
            .template-selector {
                grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .nav-links {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
                width: 100%;
            }
            
            .nav-links a {
                display: block;
                width: 100%;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .template-selector {
                grid-template-columns: 1fr;
            }
            
            .form-actions {
                flex-direction: column;
            }
            
            .builder-header {
                flex-direction: column;
                align-items: stretch;
            }
        }

        .input-sidebar {
            background: var(--white);
            padding: 30px;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            height: fit-content;
            position: relative;
            border: 1px solid rgba(0,0,0,0.03);
        }

        .form-section {
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 1px solid #eee;
            position: relative;
        }

        .form-section:last-child {
            border-bottom: none;
        }

        .form-section h3 {
            color: var(--text-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
            display: inline-block;
            font-size: 1.3rem;
            font-weight: 700;
        }

        input, textarea, select {
            width: 100%;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
            background: #fafafa;
        }

        input:focus, textarea:focus, select:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
            background: var(--white);
        }

        button {
            background: var(--primary-color);
            color: var(--white);
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        button:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3);
        }

        .add-btn {
            background: var(--success-color);
            display: block;
            width: 100%;
            margin-top: 10px;
        }

        .add-btn:hover {
            background: #3ab9e0;
        }

        .remove-btn {
            background: var(--accent-color);
            padding: 8px 15px;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .remove-btn:hover {
            background: #e11575;
        }

        .experience-item, .education-item, .skill-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid var(--primary-color);
            position: relative;
            transition: all 0.3s;
        }

        .experience-item:hover, .education-item:hover, .skill-item:hover {
            transform: translateX(5px);
        }

        /* معاينة السيرة */
        .preview-sidebar {
            position: sticky;
            top: 120px;
        }

        .cv-preview {
            background: var(--white);
            padding: 40px;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            min-height: 800px;
            font-family: 'Tajawal', 'Arial', sans-serif;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.03);
        }

        .cv-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 30px;
            border-bottom: 2px solid var(--primary-color);
            position: relative;
        }

        .cv-header h3 {
            font-size: 32px;
            color: var(--text-color);
            margin-bottom: 10px;
            font-weight: 800;
        }

        .cv-header p {
            color: var(--text-light);
            margin: 5px 0;
        }

        .cv-section {
            margin-bottom: 30px;
            position: relative;
        }

        .cv-section h4 {
            color: var(--text-color);
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
            margin-bottom: 15px;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: 700;
        }

        .section-toggle {
            cursor: pointer;
            font-size: 16px;
            color: var(--primary-color);
        }

        .experience-preview, .education-preview {
            margin-bottom: 20px;
            padding: 15px;
            border-left: 4px solid var(--primary-color);
            background: #f8f9fa;
            border-radius: 10px;
            transition: all 0.3s;
        }

        .experience-preview:hover, .education-preview:hover {
            transform: translateX(5px);
        }

        .experience-preview h5, .education-preview h5 {
            color: var(--text-color);
            margin-bottom: 5px;
            font-size: 1.1rem;
            font-weight: 700;
        }

        .experience-preview .company, .education-preview .institution {
            color: var(--primary-color);
            font-weight: bold;
        }

        .experience-preview .period, .education-preview .period {
            color: var(--text-light);
            font-style: italic;
        }

        .skill-tag {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-light));
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            margin: 5px;
            display: inline-block;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .download-btn {
            background: var(--success-color);
            width: 100%;
            margin-top: 20px;
            padding: 15px;
            font-size: 1.1rem;
        }

        .download-btn:hover {
            background: #3ab9e0;
        }

        .update-btn {
            background: var(--warning-color);
            width: 100%;
            margin-top: 10px;
        }

        .update-btn:hover {
            background: #e68919;
        }

        /* قسم اتصل بنا */
        .contact-section {
            padding: 100px 0;
            background: linear-gradient(135deg, #3a0ca3 0%, #4361ee 100%);
            color: var(--white);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .contact-section:before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB2aWV3Qm94PSIwIDAgMTIwMCA4MDAiIHByZXNlcnZlQXNpZGVjdFJhdGlvPSJub25lIj48cGF0aCBkPSJNMCA0MDBDMTUwIDMwMCAzNTAgNTAwIDUwMCA0MDBDNjUwIDMwMCA4NTAgNTAwIDEwMDAgNDAwTDEyMDAgNDAwTDEyMDAgODAwTDAgODAwVjQwMFoiIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iMC4wNSIvPjwvc3ZnPg==');
            background-size: cover;
            opacity: 0.3;
        }

        .contact-section h2 {
            margin-bottom: 30px;
            position: relative;
            z-index: 2;
        }

        .contact-info {
            max-width: 700px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        .contact-info ul {
            list-style: none;
            margin-top: 25px;
        }

        .contact-info li {
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .contact-info i {
            margin-left: 10px;
            width: 25px;
        }

        footer {
            background: var(--text-color);
            color: var(--white);
            text-align: center;
            padding: 30px 0;
        }

        .form-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }

        .save-btn {
            background: #7209b7;
        }

        .save-btn:hover {
            background: #650a9f;
        }

        .upload-btn {
            background: #4895ef;
        }

        .upload-btn:hover {
            background: #3a86e0;
        }

        .import-btn {
            background: #f8961e;
        }

        .import-btn:hover {
            background: #e68919;
        }

        .section-title {
            text-align: center;
            margin-bottom: 50px;
            color: var(--text-color);
            position: relative;
            font-size: 2.5rem;
            font-weight: 800;
        }
        
        .section-title:after {
            content: '';
            display: block;
            width: 100px;
            height: 4px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            margin: 15px auto 0;
            border-radius: 2px;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 30px;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1.5s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .file-upload-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px dashed var(--primary-color);
            text-align: center;
            transition: all 0.3s;
        }
        
        .file-upload-section:hover {
            border-color: var(--accent-color);
            transform: translateY(-3px);
        }
        
        .file-upload-section h4 {
            margin-bottom: 15px;
            color: var(--text-color);
            font-size: 1.3rem;
        }
        
        .file-input {
            display: none;
        }
        
        .file-label {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 25px;
            background: var(--primary-color);
            color: var(--white);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            margin: 10px 0;
        }
        
        .file-label:hover {
            background: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3);
        }
        
        .upload-info {
            margin-top: 10px;
            font-size: 0.9rem;
            color: var(--text-light);
        }
        
        .analysis-result {
            margin-top: 25px;
            padding: 20px;
            background: #e8f4fc;
            border-radius: 10px;
            border-left: 4px solid var(--primary-color);
            display: none;
        }
        
        .missing-sections {
            margin-top: 15px;
        }
        
        .missing-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px;
            background: rgba(255,255,255,0.7);
            border-radius: 5px;
        }
        
        .missing-item i {
            margin-left: 10px;
            color: var(--accent-color);
        }
        
        .ai-suggestions {
            margin-top: 25px;
            padding: 20px;
            background: #fff3cd;
            border-radius: 10px;
            border-left: 4px solid var(--warning-color);
            display: none;
        }
        
        .suggestion-item {
            margin-bottom: 15px;
            padding: 12px;
            background: var(--white);
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        .ai-button {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 10px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .ai-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3);
        }

        /* مساعد الذكاء الاصطناعي - محسّن */
        .assistant-panel {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 350px;
            height: 500px;
            background: var(--white);
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
            z-index: 1000;
            overflow: hidden;
            display: none;
            flex-direction: column;
            transition: all 0.3s;
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        .assistant-header {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: var(--white);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .assistant-content {
            padding: 15px;
            flex-grow: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .assistant-message {
            max-width: 85%;
            padding: 12px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .assistant-message.bot {
            background: #f0f8ff;
            border-left: 4px solid var(--primary-color);
            align-self: flex-start;
        }
        
        .assistant-message.user {
            background: #e8f4fc;
            border-right: 4px solid var(--success-color);
            align-self: flex-end;
            margin-left: auto;
        }
        
        .assistant-input-container {
            padding: 15px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
        }
        
        .assistant-input {
            flex-grow: 1;
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .assistant-send {
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .assistant-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 28px;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 10px 25px rgba(67, 97, 238, 0.4);
            transition: all 0.3s;
        }
        
        .assistant-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 30px rgba(67, 97, 238, 0.5);
        }

        .help-icon {
            position: absolute;
            top: 15px;
            left: 15px;
            color: var(--primary-color);
            cursor: pointer;
            font-size: 18px;
        }
        
        .help-tooltip {
            position: absolute;
            top: 40px;
            left: 0;
            background: var(--text-color);
            color: var(--white);
            padding: 15px;
            border-radius: 10px;
            width: 280px;
            z-index: 10;
            display: none;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            line-height: 1.5;
        }
        
        .help-icon:hover + .help-tooltip {
            display: block;
        }
        
        .nav-progress {
            height: 4px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0%;
            transition: width 0.5s;
            border-radius: 0 0 2px 2px;
        }
        
        .floating-action {
            position: fixed;
            bottom: 30px;
            left: 30px;
            background: var(--accent-color);
            color: var(--white);
            width: 70px;
            height: 70px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 10px 25px rgba(247, 37, 133, 0.4);
            z-index: 999;
            transition: all 0.3s;
        }
        
        .floating-action:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 30px rgba(247, 37, 133, 0.5);
        }
        
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--success-color);
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            box-shadow: 0 10px 25px rgba(76, 201, 240, 0.3);
            z-index: 10000;
            display: none;
            font-weight: 600;
        }

        .language-selector {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 1001;
        }

        .language-selector select {
            padding: 8px 15px;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
            background: var(--white);
            font-weight: 500;
        }

        .no-print {
            /* عناصر لا تظهر عند الطباعة */
        }

        /* أنماط القوالب المختلفة */
        .cv-preview.modern-template {
            border-left: 5px solid var(--primary-color);
        }

        .cv-preview.professional-template {
            border-left: 5px solid var(--secondary-color);
        }

        .cv-preview.creative-template {
            border-left: 5px solid var(--accent-color);
        }

        /* تأثيرات خاصة للقوالب */
        .creative-template .skill-tag {
            background: linear-gradient(135deg, var(--accent-color), #e11575);
        }

        /* تأثيرات التمرير */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.6s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* أنماط للطبع */
        @media print {
            nav, .hero, .features, .templates-section, .contact-section, footer, 
            .language-selector, .assistant-toggle, .floating-action, .form-actions {
                display: none !important;
            }
            
            .cv-preview {
                box-shadow: none;
                padding: 0;
                min-height: auto;
                border: none;
            }
            
            body {
                background: white;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 15px;
            }
            
            .hero {
                padding: 80px 0 60px;
            }
            
            .hero h2 {
                font-size: 1.8rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
            
            .features, .templates-section, .cv-builder {
                padding: 60px 0;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .assistant-panel {
                width: 90%;
                right: 5%;
                height: 70vh;
            }
            
            .floating-action, .assistant-toggle {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
        }

        /* إضافة أنماط للتنبيهات */
        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid transparent;
            border-radius: 10px;
            display: none;
        }

        .alert-success {
            color: #155724;
            background-color: #d4edda;
            border-color: #c3e6cb;
        }

        .alert-info {
            color: #0c5460;
            background-color: #d1ecf1;
            border-color: #bee5eb;
        }

        .btn-secondary {
            background: var(--gray);
        }

        .btn-secondary:hover {
            background: var(--text-light);
        }

        /* تحسينات إضافية */
        .quick-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .quick-action-btn {
            background: var(--light-gray);
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .quick-action-btn:hover {
            background: var(--primary-light);
            color: white;
        }
        
        .sample-data-section {
            margin-top: 20px;
            padding: 15px;
            background: #f0f8ff;
            border-radius: 10px;
            border-left: 4px solid var(--primary-color);
        }
        
        .sample-data-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 10px;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }
        
        .sample-data-btn:hover {
            background: var(--primary-light);
        }

        /* تحسينات لواجهة رفع الملفات */
        .pdf-upload-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .pdf-preview {
            max-width: 100%;
            max-height: 300px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            display: none;
        }
        
        .pdf-icon {
            font-size: 3rem;
            color: var(--primary-color);
        }

        /* قسم التبرع والدعم */
        .donation-section {
            background: var(--light-bg);
            padding: 60px 0;
            text-align: center;
        }
        
        .donation-options {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 40px;
        }
        
        .donation-option {
            background: var(--white);
            padding: 30px;
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            width: 280px;
            transition: all 0.3s;
        }
        
        .donation-option:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }
        
        .donation-option i {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .donation-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 15px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .donation-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(67, 97, 238, 0.3);
        }
        
        .contact-developer {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .contact-btn {
            background: var(--success-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .contact-btn:hover {
            background: #3ab9e0;
            transform: scale(1.05);
        }
        
        .contact-btn.whatsapp {
            background: #25D366;
        }
        
        .contact-btn.whatsapp:hover {
            background: #1da851;
        }
    </style>
</head>
<body>
    <!-- زر الطفو السريع -->
    <div class="floating-action no-print" onclick="startCreating()" title="بدء إنشاء السيرة الذاتية">
        <i class="fas fa-plus"></i>
    </div>

    <!-- مساعد الذكاء الاصطناعي - محسّن -->
    <div class="assistant-toggle no-print" id="assistantToggle">
        <i class="fas fa-robot"></i>
    </div>
    
    <div class="assistant-panel no-print" id="assistantPanel">
        <div class="assistant-header">
            <h3 id="assistant-title">مساعد السيرة الذاتية</h3>
            <i class="fas fa-times" id="closeAssistant"></i>
        </div>
        <div class="assistant-content" id="assistantContent">
            <!-- سيتم إضافة الرسائل هنا ديناميكياً -->
        </div>
        <div class="assistant-input-container">
            <input type="text" class="assistant-input" id="assistantInput" placeholder="اكتب سؤالك هنا...">
            <button class="assistant-send" id="assistantSend"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <!-- رسائل Toast -->
    <div class="toast" id="toast"></div>

    <div class="language-selector no-print">
        <select id="languageSelect">
            <option value="ar">العربية</option>
            <option value="en">English</option>
        </select>
    </div>

    <header>
        <nav class="no-print" id="mainNav">
            <div class="nav-progress" id="navProgress"></div>
            <div class="nav-container">
                <div class="logo">
                    <i class="fas fa-file-alt" style="color: var(--primary-color); font-size: 1.8rem;"></i>
                    <h1 id="logo-text">سيرتي</h1>
                </div>
                <ul class="nav-links">
                    <li><a href="#home" id="nav-home">الرئيسية</a></li>
                    <li><a href="#templates" id="nav-templates">القوالب</a></li>
                    <li><a href="#create" id="nav-create">إنشاء سيرة</a></li>
                    <li><a href="#donation" id="nav-donation">دعم المطور</a></li>
                    <li><a href="#contact" id="nav-contact">اتصل بنا</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main>
        <!-- قسم الرئيسية -->
        <section id="home" class="hero">
            <div class="container">
                <div class="hero-content">
                    <h2 id="hero-title">أنشئ سيرتك الذاتية باحترافية في دقائق</h2>
                    <p id="hero-subtitle">اختر من بين القوالب المصممة بخبرة واحصل على وظيفة أحلامك</p>
                    <button class="cta-button" onclick="startCreating()" id="hero-button">
                        <i class="fas fa-rocket"></i> ابدأ الآن مجانًا
                    </button>
                </div>
            </div>
        </section>

        <!-- قسم المميزات -->
        <section class="features">
            <div class="container">
                <h2 class="section-title" id="features-title">مميزات موقعنا</h2>
                <div class="features-grid">
                    <div class="feature-card fade-in">
                        <i class="fas fa-magic"></i>
                        <h3 id="feature1-title">سهل الاستخدام</h3>
                        <p id="feature1-desc">واجهة بسيطة تمكنك من إنشاء سيرة ذاتية احترافية في دقائق</p>
                    </div>
                    <div class="feature-card fade-in">
                        <i class="fas fa-palette"></i>
                        <h3 id="feature2-title">قوالب متعددة</h3>
                        <p id="feature2-desc">اختر من بين مجموعة متنوعة من القوالب المناسبة لمختلف المجالات</p>
                    </div>
                    <div class="feature-card fade-in">
                        <i class="fas fa-file-pdf"></i>
                        <h3 id="feature3-title">تحميل فوري</h3>
                        <p id="feature3-desc">احصل على سيرتك الذاتية بصيغة PDF جاهزة للإرسال</p>
                    </div>
                    <div class="feature-card fade-in">
                        <i class="fas fa-robot"></i>
                        <h3 id="feature4-title">مساعد ذكي</h3>
                        <p id="feature4-desc">احصل على إرشادات ونصائح ذكية لتحسين سيرتك الذاتية</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- قسم القوالب -->
        <section id="templates" class="templates-section">
            <div class="container">
                <h2 class="section-title" id="templates-title">اختر قالب السيرة الذاتية</h2>
                <div class="template-selector">
                    <div class="template-option active" data-template="modern">
                        <div class="template-badge" id="badge-modern">الأكثر شيوعاً</div>
                        <div class="template-preview modern-preview">
                            <div class="template-content">
                                <h3>حديث</h3>
                                <p>تصميم عصري وأنيق</p>
                            </div>
                        </div>
                    </div>
                    <div class="template-option" data-template="professional">
                        <div class="template-badge" id="badge-professional">مميز</div>
                        <div class="template-preview professional-preview">
                            <div class="template-content">
                                <h3>احترافي</h3>
                                <p>مظهر رسمي وجاد</p>
                            </div>
                        </div>
                    </div>
                    <div class="template-option" data-template="creative">
                        <div class="template-badge" id="badge-creative">جذاب</div>
                        <div class="template-preview creative-preview">
                            <div class="template-content">
                                <h3>إبداعي</h3>
                                <p>تصميم مبدع وجذاب</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- قسم إنشاء السيرة -->
        <section id="create" class="cv-builder">
            <div class="container">
                <h2 class="section-title" id="builder-title">محرر السيرة الذاتية</h2>
                
                <div class="alert alert-success" id="successAlert">
                    تم تحديث السيرة الذاتية بنجاح!
                </div>
                
                <div class="builder-header">
                    <div class="cv-completeness">
                        <div class="completeness-text">
                            <span id="completeness-text">اكتمال السيرة الذاتية:</span>
                            <span id="completenessPercent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress" id="completenessProgress"></div>
                        </div>
                        <span id="completenessStatus" class="completeness-status" style="display: block; text-align: center; margin-top: 10px; font-size: 0.9rem;"></span>
                    </div>
                    
                    <div class="quick-actions">
                        <button class="quick-action-btn" onclick="loadSampleData()">
                            <i class="fas fa-magic"></i> بيانات نموذجية
                        </button>
                        <button class="quick-action-btn" onclick="importCV()">
                            <i class="fas fa-file-import"></i> استيراد من ملف
                        </button>
                        <button class="quick-action-btn" onclick="clearAllData()">
                            <i class="fas fa-trash"></i> مسح الكل
                        </button>
                    </div>
                </div>
                
                <div class="loading" id="loadingIndicator">
                    <div class="spinner"></div>
                    <p id="loading-text">جاري تحميل السيرة الذاتية...</p>
                </div>
                
                <div class="builder-container">
                    <!-- جانب الإدخال -->
                    <div class="input-sidebar">
                        <form id="cvForm">
                            <div class="form-section">
                                <h3 id="personal-info-title"><i class="fas fa-user" style="margin-left: 10px;"></i> المعلومات الشخصية</h3>
                                <input type="text" id="name" placeholder="الاسم الكامل" required>
                                <input type="email" id="email" placeholder="البريد الإلكتروني">
                                <input type="tel" id="phone" placeholder="رقم الهاتف">
                                <input type="text" id="jobTitle" placeholder="المسمى الوظيفي المستهدف">
                                <input type="text" id="location" placeholder="المدينة/البلد">
                                <textarea id="summary" placeholder="ملخص احترافي" rows="3"></textarea>
                            </div>

                            <div class="form-section">
                                <h3 id="experience-title"><i class="fas fa-briefcase" style="margin-left: 10px;"></i> الخبرة العملية</h3>
                                <div id="experiences">
                                    <div class="experience-item">
                                        <input type="text" class="exp-title" placeholder="المسمى الوظيفي">
                                        <input type="text" class="exp-company" placeholder="اسم الشركة">
                                        <input type="text" class="exp-period" placeholder="الفترة الزمنية (مثال: 2020 - 2023)">
                                        <textarea class="exp-description" placeholder="المسؤوليات والإنجازات" rows="3"></textarea>
                                        <button type="button" class="remove-btn" onclick="removeExperience(this)" id="remove-exp-btn">
                                            <i class="fas fa-trash"></i> حذف الخبرة
                                        </button>
                                    </div>
                                </div>
                                <button type="button" class="add-btn" onclick="addExperience()" id="add-exp-btn">
                                    <i class="fas fa-plus"></i> إضافة خبرة أخرى
                                </button>
                            </div>

                            <div class="form-section">
                                <h3 id="education-title"><i class="fas fa-graduation-cap" style="margin-left: 10px;"></i> التعليم</h3>
                                <div id="educations">
                                    <div class="education-item">
                                        <input type="text" class="edu-degree" placeholder="المؤهل الدراسي">
                                        <input type="text" class="edu-institution" placeholder="اسم المؤسسة التعليمية">
                                        <input type="text" class="edu-period" placeholder="سنة التخرج">
                                        <textarea class="edu-details" placeholder="التفاصيل الإضافية (اختياري)" rows="2"></textarea>
                                        <button type="button" class="remove-btn" onclick="removeEducation(this)" id="remove-edu-btn">
                                            <i class="fas fa-trash"></i> حذف المؤهل
                                        </button>
                                    </div>
                                </div>
                                <button type="button" class="add-btn" onclick="addEducation()" id="add-edu-btn">
                                    <i class="fas fa-plus"></i> إضافة مؤهل آخر
                                </button>
                            </div>

                            <div class="form-section">
                                <h3 id="skills-title"><i class="fas fa-tools" style="margin-left: 10px;"></i> المهارات</h3>
                                <div id="skills-container">
                                    <div class="skill-item">
                                        <input type="text" class="skill-input" placeholder="المهارة (مثال: HTML, CSS, JavaScript)">
                                        <select class="skill-level">
                                            <option value="">مستوى المهارة</option>
                                            <option value="مبتدئ">مبتدئ</option>
                                            <option value="متوسط">متوسط</option>
                                            <option value="متقدم">متقدم</option>
                                            <option value="خبير">خبير</option>
                                        </select>
                                        <button type="button" class="remove-btn" onclick="removeSkill(this)" id="remove-skill-btn">
                                            <i class="fas fa-trash"></i> حذف
                                        </button>
                                    </div>
                                </div>
                                <button type="button" class="add-btn" onclick="addSkill()" id="add-skill-btn">
                                    <i class="fas fa-plus"></i> إضافة مهارة
                                </button>
                            </div>
                            
                            <div class="sample-data-section">
                                <p>يمكنك تحميل بيانات نموذجية لتبدأ بسرعة:</p>
                                <button type="button" class="sample-data-btn" onclick="loadSampleData('developer')">
                                    <i class="fas fa-code"></i> بيانات مطور ويب
                                </button>
                                <button type="button" class="sample-data-btn" onclick="loadSampleData('designer')">
                                    <i class="fas fa-paint-brush"></i> بيانات مصمم جرافيك
                                </button>
                                <button type="button" class="sample-data-btn" onclick="loadSampleData('marketing')">
                                    <i class="fas fa-chart-line"></i> بيانات مسوق إلكتروني
                                </button>
                            </div>

                            <div class="form-actions">
                                <button type="button" class="update-btn" onclick="updatePreview()" id="update-btn">
                                    <i class="fas fa-sync-alt"></i> تحديث المعاينة
                                </button>
                                <button type="button" class="save-btn" onclick="saveCV()" id="save-btn">
                                    <i class="fas fa-save"></i> حفظ السيرة
                                </button>
                                <button type="button" class="download-btn" onclick="generatePDF()" id="download-btn">
                                    <i class="fas fa-download"></i> تحميل PDF
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- معاينة السيرة -->
                    <div class="preview-sidebar">
                        <div class="cv-preview modern-template" id="cvPreview">
                            <div class="cv-header">
                                <h3 id="previewName">اسمك الكامل</h3>
                                <p id="previewJobTitle">المسمى الوظيفي المستهدف</p>
                                <p id="previewContact">بريدك الإلكتروني | هاتفك</p>
                                <p id="previewLocation">مدينتك/بلدك</p>
                            </div>
                            
                            <div class="cv-section">
                                <h4 id="preview-summary-title">ملخص احترافي</h4>
                                <div class="section-content">
                                    <p id="previewSummary">ملخصك المهني سيظهر هنا</p>
                                </div>
                            </div>
                            
                            <div class="cv-section">
                                <h4 id="preview-exp-title">الخبرة العملية</h4>
                                <div class="section-content">
                                    <div id="previewExperience">
                                        <div class="experience-preview">
                                            <h5>المسمى الوظيفي</h5>
                                            <span class="company">اسم الشركة</span> | 
                                            <span class="period">الفترة الزمنية</span>
                                            <p>وصف المسؤوليات والإنجازات</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="cv-section">
                                <h4 id="preview-edu-title">التعليم</h4>
                                <div class="section-content">
                                    <div id="previewEducation">
                                        <div class="education-preview">
                                            <h5>المؤهل الدراسي</h5>
                                            <span class="institution">اسم المؤسسة التعليمية</span> | 
                                            <span class="period">سنة التخرج</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="cv-section">
                                <h4 id="preview-skills-title">المهارات</h4>
                                <div class="section-content">
                                    <div id="previewSkills">
                                        <span class="skill-tag">مهارة مثال</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- قسم دعم المطور -->
        <section id="donation" class="donation-section">
            <div class="container">
                <h2 class="section-title" id="donation-title">ادعم المطور</h2>
                <p id="donation-subtitle">إذا أعجبك هذا التطبيق ووجدته مفيداً، يمكنك دعم المطور لتطويره وإضافة المزيد من المميزات</p>
                
                <div class="donation-options">
                    <div class="donation-option">
                        <i class="fas fa-mobile-alt"></i>
                        <h3>فودافون كاش</h3>
                        <p>يمكنك التبرع عبر فودافون كاش على الرقم:</p>
                        <p class="donation-number">01010421571</p>
                        <button class="donation-btn" onclick="copyToClipboard('01010421571')">
                            <i class="fas fa-copy"></i> نسخ الرقم
                        </button>
                    </div>
                    
                    <div class="donation-option">
                        <i class="fas fa-comments"></i>
                        <h3>التواصل مع المطور</h3>
                        <p>للاستفسارات أو اقتراحات التحسين، يمكنك التواصل مع المطور مباشرة</p>
                        <div class="contact-developer">
                            <button class="contact-btn whatsapp" onclick="openWhatsApp()">
                                <i class="fab fa-whatsapp"></i> واتساب
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- قسم اتصل بنا -->
        <section id="contact" class="contact-section">
            <div class="container">
                <h2 class="section-title" id="contact-title" style="color: white;">اتصل بنا</h2>
                <div class="contact-info">
                    <p id="contact-desc">للاستفسارات والدعم الفني، يرجى التواصل معنا عبر:</p>
                    <ul>
                        <li><i class="fas fa-envelope"></i> <span id="contact-email"> البريد الإلكتروني: ma7333122@gmail.com </span></li>
                        <li><i class="fas fa-phone"></i> <span id="contact-phone"> الهاتف: 01010421571 </span></li>
                        <li><i class="fas fa-map-marker-alt"></i> <span id="contact-address"> العنوان: المنصورة، الدقهلية، مصر </span></li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p id="footer-text">© 2024 جميع الحقوق محفوظة - منشئ السيرة الذاتية</p>
            <p>تم التطوير بدقة وحب لخدمتكم ❤️</p>
        </div>
    </footer>

    <script>
        // ========== دوال JavaScript الأساسية ==========
        
        // دالة للبدء في إنشاء السيرة
        function startCreating() {
            document.getElementById('create').scrollIntoView({
                behavior: 'smooth'
            });
        }

        // إظهار رسائل Toast
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.style.background = type === 'success' ? 'var(--success-color)' : 
                                   type === 'error' ? 'var(--accent-color)' : 
                                   'var(--warning-color)';
            toast.style.display = 'block';
            
            setTimeout(() => {
                toast.style.display = 'none';
            }, 3000);
        }

        // نسخ الرقم إلى الحافظة
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(function() {
                showToast('تم نسخ الرقم إلى الحافظة', 'success');
            }, function(err) {
                console.error('Could not copy text: ', err);
            });
        }

        // فتح واتساب
        function openWhatsApp() {
            const message = encodeURIComponent('مرحباً، أريد الاستفسار عن منشئ السيرة الذاتية');
            window.open(`https://wa.me/201010421571?text=${message}`, '_blank');
        }

        // تحديث المعاينة
        function updatePreview() {
            console.log("تم استدعاء updatePreview");
            
            try {
                // إظهار مؤشر التحميل
                const loadingIndicator = document.getElementById('loadingIndicator');
                if (loadingIndicator) {
                    loadingIndicator.style.display = 'block';
                }
                
                // تأخير بسيط لمحاكاة التحميل
                setTimeout(() => {
                    // المعلومات الشخصية
                    const name = document.getElementById('name').value || 'اسمك الكامل';
                    const jobTitle = document.getElementById('jobTitle').value || 'المسمى الوظيفي المستهدف';
                    const email = document.getElementById('email').value || 'بريدك الإلكتروني';
                    const phone = document.getElementById('phone').value || 'هاتفك';
                    const location = document.getElementById('location').value || '';
                    const summary = document.getElementById('summary').value || 'ملخصك المهني سيظهر هنا';
                    
                    document.getElementById('previewName').textContent = name;
                    document.getElementById('previewJobTitle').textContent = jobTitle;
                    document.getElementById('previewContact').textContent = `${email} | ${phone}`;
                    
                    const previewLocation = document.getElementById('previewLocation');
                    if (previewLocation) {
                        if (location) {
                            previewLocation.textContent = location;
                            previewLocation.style.display = 'block';
                        } else {
                            previewLocation.style.display = 'none';
                        }
                    }
                    
                    document.getElementById('previewSummary').textContent = summary;
                    
                    // الخبرات العملية
                    const experiences = document.querySelectorAll('.experience-item');
                    const previewExperience = document.getElementById('previewExperience');
                    if (previewExperience) {
                        previewExperience.innerHTML = '';
                        
                        if (experiences.length === 0) {
                            previewExperience.innerHTML = '<p>لا توجد خبرات مضافة بعد</p>';
                        } else {
                            experiences.forEach(exp => {
                                const title = exp.querySelector('.exp-title')?.value || 'المسمى الوظيفي';
                                const company = exp.querySelector('.exp-company')?.value || 'اسم الشركة';
                                const period = exp.querySelector('.exp-period')?.value || 'الفترة الزمنية';
                                const description = exp.querySelector('.exp-description')?.value || 'وصف المسؤوليات والإنجازات';
                                
                                const expHTML = `
                                    <div class="experience-preview">
                                        <h5>${title}</h5>
                                        <span class="company">${company}</span> | 
                                        <span class="period">${period}</span>
                                        <p>${description.replace(/\n/g, '<br>')}</p>
                                    </div>
                                `;
                                
                                previewExperience.innerHTML += expHTML;
                            });
                        }
                    }
                    
                    // التعليم
                    const educations = document.querySelectorAll('.education-item');
                    const previewEducation = document.getElementById('previewEducation');
                    if (previewEducation) {
                        previewEducation.innerHTML = '';
                        
                        if (educations.length === 0) {
                            previewEducation.innerHTML = '<p>لا توجد مؤهلات مضافة بعد</p>';
                        } else {
                            educations.forEach(edu => {
                                const degree = edu.querySelector('.edu-degree')?.value || 'المؤهل الدراسي';
                                const institution = edu.querySelector('.edu-institution')?.value || 'اسم المؤسسة التعليمية';
                                const period = edu.querySelector('.edu-period')?.value || 'سنة التخرج';
                                const details = edu.querySelector('.edu-details')?.value || '';
                                
                                const eduHTML = `
                                    <div class="education-preview">
                                        <h5>${degree}</h5>
                                        <span class="institution">${institution}</span> | 
                                        <span class="period">${period}</span>
                                        ${details ? `<p>${details.replace(/\n/g, '<br>')}</p>` : ''}
                                    </div>
                                `;
                                
                                previewEducation.innerHTML += eduHTML;
                            });
                        }
                    }
                    
                    // المهارات
                    const skills = document.querySelectorAll('.skill-input');
                    const previewSkills = document.getElementById('previewSkills');
                    if (previewSkills) {
                        previewSkills.innerHTML = '';
                        
                        if (skills.length === 0) {
                            previewSkills.innerHTML = '<p>لا توجد مهارات مضافة بعد</p>';
                        } else {
                            skills.forEach(skill => {
                                const skillValue = skill.value.trim();
                                const skillLevel = skill.parentElement?.querySelector('.skill-level')?.value;
                                if (skillValue) {
                                    const levelText = skillLevel ? ` (${skillLevel})` : '';
                                    const skillHTML = `<span class="skill-tag">${skillValue}${levelText}</span>`;
                                    previewSkills.innerHTML += skillHTML;
                                }
                            });
                        }
                    }
                    
                    // تحديث مؤشر الاكتمال
                    updateCompleteness();
                    
                    // إخفاء مؤشر التحميل
                    if (loadingIndicator) {
                        loadingIndicator.style.display = 'none';
                    }
                    
                    // إظهار رسالة النجاح
                    showToast('تم تحديث السيرة الذاتية بنجاح!', 'success');
                }, 500);
            } catch (error) {
                console.error('خطأ في updatePreview:', error);
                
                // إخفاء مؤشر التحميل في حالة الخطأ
                const loadingIndicator = document.getElementById('loadingIndicator');
                if (loadingIndicator) {
                    loadingIndicator.style.display = 'none';
                }
                
                // إظهار رسالة خطأ
                showToast('حدث خطأ أثناء تحديث المعاينة. يرجى المحاولة مرة أخرى.', 'error');
            }
        }

        // تحديث مؤشر اكتمال السيرة الذاتية
        function updateCompleteness() {
            try {
                let completeness = 0;
                const totalPoints = 10; // إجمالي النقاط المحتملة
                
                // المعلومات الأساسية (3 نقاط)
                if (document.getElementById('name').value) completeness += 1;
                if (document.getElementById('email').value) completeness += 1;
                if (document.getElementById('jobTitle').value) completeness += 1;
                
                // الملخص (1 نقطة)
                if (document.getElementById('summary').value) completeness += 1;
                
                // الخبرات (2 نقطة - نقطة لكل خبرة، بحد أقصى 2)
                const experiences = document.querySelectorAll('.experience-item');
                completeness += Math.min(experiences.length, 2);
                
                // التعليم (1 نقطة)
                const educations = document.querySelectorAll('.education-item');
                if (educations.length > 0) completeness += 1;
                
                // المهارات (2 نقطة)
                const skills = document.querySelectorAll('.skill-input');
                completeness += Math.min(skills.length, 2);
                
                const percent = Math.round((completeness / totalPoints) * 100);
                document.getElementById('completenessPercent').textContent = percent + '%';
                document.getElementById('completenessProgress').style.width = percent + '%';
                
                // تحديث حالة الاكتمال
                let statusText = '';
                if (percent < 30) {
                    statusText = '(محتاج تحسين)';
                } else if (percent < 70) {
                    statusText = '(جيد)';
                } else if (percent < 90) {
                    statusText = '(ممتاز)';
                } else {
                    statusText = '(مثالي)';
                }
                
                document.getElementById('completenessStatus').textContent = statusText;
                
                // تحديث شريط التقدم في الشريط العلوي
                document.getElementById('navProgress').style.width = percent + '%';
            } catch (error) {
                console.error('خطأ في updateCompleteness:', error);
            }
        }

        // إضافة خبرة عمل جديدة
        function addExperience() {
            const experiencesDiv = document.getElementById('experiences');
            const newExperience = document.createElement('div');
            newExperience.className = 'experience-item';
            newExperience.innerHTML = `
                <input type="text" class="exp-title" placeholder="المسمى الوظيفي">
                <input type="text" class="exp-company" placeholder="اسم الشركة">
                <input type="text" class="exp-period" placeholder="الفترة الزمنية (مثال: 2020 - 2023)">
                <textarea class="exp-description" placeholder="المسؤوليات والإنجازات" rows="3"></textarea>
                <button type="button" class="remove-btn" onclick="removeExperience(this)">
                    <i class="fas fa-trash"></i> حذف الخبرة
                </button>
            `;
            experiencesDiv.appendChild(newExperience);
        }

        // حذف خبرة
        function removeExperience(button) {
            button.parentElement.remove();
            updatePreview();
        }

        // إضافة تعليم جديد
        function addEducation() {
            const educationsDiv = document.getElementById('educations');
            const newEducation = document.createElement('div');
            newEducation.className = 'education-item';
            newEducation.innerHTML = `
                <input type="text" class="edu-degree" placeholder="المؤهل الدراسي">
                <input type="text" class="edu-institution" placeholder="اسم المؤسسة التعليمية">
                <input type="text" class="edu-period" placeholder="سنة التخرج">
                <textarea class="edu-details" placeholder="التفاصيل الإضافية (اختياري)" rows="2"></textarea>
                <button type="button" class="remove-btn" onclick="removeEducation(this)">
                    <i class="fas fa-trash"></i> حذف المؤهل
                </button>
            `;
            educationsDiv.appendChild(newEducation);
        }

        // حذف تعليم
        function removeEducation(button) {
            button.parentElement.remove();
            updatePreview();
        }

        // إضافة مهارة جديدة
        function addSkill() {
            const skillsContainer = document.getElementById('skills-container');
            const newSkill = document.createElement('div');
            newSkill.className = 'skill-item';
            newSkill.innerHTML = `
                <input type="text" class="skill-input" placeholder="المهارة (مثال: HTML, CSS, JavaScript)">
                <select class="skill-level">
                    <option value="">مستوى المهارة</option>
                    <option value="مبتدئ">مبتدئ</option>
                    <option value="متوسط">متوسط</option>
                    <option value="متقدم">متقدم</option>
                    <option value="خبير">خبير</option>
                </select>
                <button type="button" class="remove-btn" onclick="removeSkill(this)">
                    <i class="fas fa-trash"></i> حذف
                </button>
            `;
            skillsContainer.appendChild(newSkill);
        }

        // حذف مهارة
        function removeSkill(button) {
            button.parentElement.remove();
            updatePreview();
        }

        // حفظ السيرة الذاتية
        function saveCV() {
            const cvData = {
                personalInfo: {
                    name: document.getElementById('name').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    jobTitle: document.getElementById('jobTitle').value,
                    location: document.getElementById('location').value,
                    summary: document.getElementById('summary').value
                },
                experiences: [],
                education: [],
                skills: [],
                template: document.querySelector('.template-option.active').getAttribute('data-template')
            };

            // جمع الخبرات
            document.querySelectorAll('.experience-item').forEach(item => {
                cvData.experiences.push({
                    title: item.querySelector('.exp-title').value,
                    company: item.querySelector('.exp-company').value,
                    period: item.querySelector('.exp-period').value,
                    description: item.querySelector('.exp-description').value
                });
            });

            // جمع التعليم
            document.querySelectorAll('.education-item').forEach(item => {
                cvData.education.push({
                    degree: item.querySelector('.edu-degree').value,
                    institution: item.querySelector('.edu-institution').value,
                    period: item.querySelector('.edu-period').value,
                    details: item.querySelector('.edu-details').value
                });
            });

            // جمع المهارات
            document.querySelectorAll('.skill-item').forEach(item => {
                const skillInput = item.querySelector('.skill-input');
                const skillLevel = item.querySelector('.skill-level').value;
                if (skillInput.value.trim()) {
                    cvData.skills.push({
                        name: skillInput.value.trim(),
                        level: skillLevel
                    });
                }
            });

            // حفظ في localStorage
            localStorage.setItem('cvData', JSON.stringify(cvData));
            
            // إنشاء ملف JSON للتحميل
            const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(cvData, null, 2));
            const downloadAnchorNode = document.createElement('a');
            downloadAnchorNode.setAttribute("href", dataStr);
            const fileName = "سيرتي_الذاتية.json";
            downloadAnchorNode.setAttribute("download", fileName);
            document.body.appendChild(downloadAnchorNode);
            downloadAnchorNode.click();
            downloadAnchorNode.remove();
            
            showToast('تم حفظ السيرة الذاتية بنجاح! وتم تحميل ملف JSON.', 'success');
        }

        // استيراد سيرة ذاتية من ملف JSON
        function importCV() {
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = '.json';
            fileInput.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                reader.onload = function(event) {
                    try {
                        const cvData = JSON.parse(event.target.result);
                        loadCVData(cvData);
                        showToast('تم استيراد السيرة الذاتية بنجاح!', 'success');
                    } catch (error) {
                        showToast('خطأ في تحميل الملف. يرجى التأكد من صحة تنسيق الملف.', 'error');
                    }
                };
                reader.readAsText(file);
            };
            fileInput.click();
        }

        // تحميل بيانات السيرة الذاتية
        function loadCVData(cvData) {
            // تعبئة البيانات الشخصية
            document.getElementById('name').value = cvData.personalInfo.name || '';
            document.getElementById('email').value = cvData.personalInfo.email || '';
            document.getElementById('phone').value = cvData.personalInfo.phone || '';
            document.getElementById('jobTitle').value = cvData.personalInfo.jobTitle || '';
            document.getElementById('location').value = cvData.personalInfo.location || '';
            document.getElementById('summary').value = cvData.personalInfo.summary || '';
            
            // تعبئة الخبرات
            const experiencesDiv = document.getElementById('experiences');
            experiencesDiv.innerHTML = '';
            cvData.experiences.forEach(exp => {
                const newExperience = document.createElement('div');
                newExperience.className = 'experience-item';
                newExperience.innerHTML = `
                    <input type="text" class="exp-title" placeholder="المسمى الوظيفي" value="${exp.title || ''}">
                    <input type="text" class="exp-company" placeholder="اسم الشركة" value="${exp.company || ''}">
                    <input type="text" class="exp-period" placeholder="الفترة الزمنية" value="${exp.period || ''}">
                    <textarea class="exp-description" placeholder="المسؤوليات والإنجازات" rows="3">${exp.description || ''}</textarea>
                    <button type="button" class="remove-btn" onclick="removeExperience(this)">
                        <i class="fas fa-trash"></i> حذف الخبرة
                    </button>
                `;
                experiencesDiv.appendChild(newExperience);
            });
            
            // تعبئة التعليم
            const educationsDiv = document.getElementById('educations');
            educationsDiv.innerHTML = '';
            cvData.education.forEach(edu => {
                const newEducation = document.createElement('div');
                newEducation.className = 'education-item';
                newEducation.innerHTML = `
                    <input type="text" class="edu-degree" placeholder="المؤهل الدراسي" value="${edu.degree || ''}">
                    <input type="text" class="edu-institution" placeholder="اسم المؤسسة التعليمية" value="${edu.institution || ''}">
                    <input type="text" class="edu-period" placeholder="سنة التخرج" value="${edu.period || ''}">
                    <textarea class="edu-details" placeholder="التفاصيل الإضافية" rows="2">${edu.details || ''}</textarea>
                    <button type="button" class="remove-btn" onclick="removeEducation(this)">
                        <i class="fas fa-trash"></i> حذف المؤهل
                    </button>
                `;
                educationsDiv.appendChild(newEducation);
            });
            
            // تعبئة المهارات
            const skillsContainer = document.getElementById('skills-container');
            skillsContainer.innerHTML = '';
            cvData.skills.forEach(skill => {
                const newSkill = document.createElement('div');
                newSkill.className = 'skill-item';
                newSkill.innerHTML = `
                    <input type="text" class="skill-input" placeholder="المهارة" value="${skill.name || ''}">
                    <select class="skill-level">
                        <option value="">مستوى المهارة</option>
                        <option value="مبتدئ" ${skill.level === 'مبتدئ' ? 'selected' : ''}>مبتدئ</option>
                        <option value="متوسط" ${skill.level === 'متوسط' ? 'selected' : ''}>متوسط</option>
                        <option value="متقدم" ${skill.level === 'متقدم' ? 'selected' : ''}>متقدم</option>
                        <option value="خبير" ${skill.level === 'خبير' ? 'selected' : ''}>خبير</option>
                    </select>
                    <button type="button" class="remove-btn" onclick="removeSkill(this)">
                        <i class="fas fa-trash"></i> حذف
                    </button>
                `;
                skillsContainer.appendChild(newSkill);
            });
            
            // تطبيق القالب إذا كان محفوظاً
            if (cvData.template) {
                document.querySelectorAll('.template-option').forEach(option => {
                    option.classList.remove('active');
                    if (option.getAttribute('data-template') === cvData.template) {
                        option.classList.add('active');
                        applyTemplate(cvData.template);
                    }
                });
            }
            
            // تحديث المعاينة
            updatePreview();
        }

        // تحميل بيانات نموذجية
        function loadSampleData(type = 'developer') {
            const sampleData = {
                developer: {
                    personalInfo: {
                        name: "أحمد محمد",
                        email: "ahmed@example.com",
                        phone: "+20123456789",
                        jobTitle: "مطور ويب",
                        location: "القاهرة، مصر",
                        summary: "مطور ويب متخصص في إنشاء تطبيقات ويب تفاعلية باستخدام أحدث التقنيات. أسعى للانضمام إلى فريق عمل ديناميكي حيث يمكنني المساهمة بمهاراتي وتطوير خبراتي المهنية."
                    },
                    experiences: [
                        {
                            title: "مطور ويب",
                            company: "شركة التقنية المتقدمة",
                            period: "2020 - 2023",
                            description: "تصميم وتطوير تطبيقات ويب باستخدام React.js وNode.js\nتحسين أداء التطبيقات وزيادة سرعة التحميل بنسبة 40%\nإدارة فريق من المطورين وتدريبهم على التقنيات الجديدة"
                        }
                    ],
                    education: [
                        {
                            degree: "بكالوريوس في علوم الحاسب",
                            institution: "جامعة القاهرة",
                            period: "2019",
                            details: "تخصص في هندسة البرمجيات وتطوير الويب"
                        }
                    ],
                    skills: [
                        { name: "HTML, CSS, JavaScript", level: "متقدم" },
                        { name: "React.js, Node.js", level: "متقدم" },
                        { name: "Python, Django", level: "متوسط" },
                        { name: "Git, GitHub", level: "متقدم" }
                    ]
                },
                designer: {
                    personalInfo: {
                        name: "سارة أحمد",
                        email: "sara@example.com",
                        phone: "+20123456788",
                        jobTitle: "مصمم جرافيك",
                        location: "الإسكندرية، مصر",
                        summary: "مصمم جرافيك مبدع مع خبرة 5 سنوات في تصميم الهويات البصرية والمواد التسويقية. أمتلك مهارات متقدمة في Adobe Creative Suite وأسعى لخلق تصميمات مؤثرة وجذابة."
                    },
                    experiences: [
                        {
                            title: "مصمم جرافيك",
                            company: "وكالة الإبداع الرقمي",
                            period: "2019 - 2023",
                            description: "تصميم هويات بصرية للعلامات التجارية\nإنشاء مواد تسويقية مطبوعة ورقمية\nالتعاون مع فريق التسويق لتحسين تجربة المستخدم"
                        }
                    ],
                    education: [
                        {
                            degree: "بكالوريوس في الفنون الجميلة",
                            institution: "جامعة الإسكندرية",
                            period: "2018",
                            details: "تخصص في التصميم الجرافيكي والوسائط المتعددة"
                        }
                    ],
                    skills: [
                        { name: "Adobe Photoshop", level: "متقدم" },
                        { name: "Adobe Illustrator", level: "متقدم" },
                        { name: "Adobe InDesign", level: "متوسط" },
                        { name: "UI/UX Design", level: "متوسط" }
                    ]
                },
                marketing: {
                    personalInfo: {
                        name: "محمد علي",
                        email: "mohamed@example.com",
                        phone: "+20123456787",
                        jobTitle: "مسوق إلكتروني",
                        location: "الجيزة، مصر",
                        summary: "مسوق إلكتروني محترف مع خبرة في إدارة الحملات التسويقية وتحليل البيانات لتحسين العائد على الاستثمار. أمتلك مهارات قوية في التسويق عبر وسائل التواصل الاجتماعي وتحسين محركات البحث."
                    },
                    experiences: [
                        {
                            title: "مسوق إلكتروني",
                            company: "شركة التسويق الرقمي",
                            period: "2021 - 2023",
                            description: "إدارة الحملات التسويقية على وسائل التواصل الاجتماعي\nتحليل بيانات الحملات وتحسين استراتيجيات التسويق\nزيادة المبيعات عبر الإنترنت بنسبة 35% خلال 6 أشهر"
                        }
                    ],
                    education: [
                        {
                            degree: "بكالوريوس في إدارة الأعمال",
                            institution: "جامعة عين شمس",
                            period: "2020",
                            details: "تخصص في التسويق الرقمي والإلكتروني"
                        }
                    ],
                    skills: [
                        { name: "التسويق عبر وسائل التواصل", level: "متقدم" },
                        { name: "تحسين محركات البحث (SEO)", level: "متوسط" },
                        { name: "تحليل البيانات", level: "متوسط" },
                        { name: "إدارة الحملات الإعلانية", level: "متقدم" }
                    ]
                }
            };

            const data = sampleData[type];
            if (!data) return;

            // تعبئة البيانات الشخصية
            document.getElementById('name').value = data.personalInfo.name;
            document.getElementById('email').value = data.personalInfo.email;
            document.getElementById('phone').value = data.personalInfo.phone;
            document.getElementById('jobTitle').value = data.personalInfo.jobTitle;
            document.getElementById('location').value = data.personalInfo.location;
            document.getElementById('summary').value = data.personalInfo.summary;
            
            // تعبئة الخبرات
            const experiencesDiv = document.getElementById('experiences');
            experiencesDiv.innerHTML = '';
            data.experiences.forEach(exp => {
                const newExperience = document.createElement('div');
                newExperience.className = 'experience-item';
                newExperience.innerHTML = `
                    <input type="text" class="exp-title" placeholder="المسمى الوظيفي" value="${exp.title}">
                    <input type="text" class="exp-company" placeholder="اسم الشركة" value="${exp.company}">
                    <input type="text" class="exp-period" placeholder="الفترة الزمنية" value="${exp.period}">
                    <textarea class="exp-description" placeholder="المسؤوليات والإنجازات" rows="3">${exp.description}</textarea>
                    <button type="button" class="remove-btn" onclick="removeExperience(this)">
                        <i class="fas fa-trash"></i> حذف الخبرة
                    </button>
                `;
                experiencesDiv.appendChild(newExperience);
            });
            
            // تعبئة التعليم
            const educationsDiv = document.getElementById('educations');
            educationsDiv.innerHTML = '';
            data.education.forEach(edu => {
                const newEducation = document.createElement('div');
                newEducation.className = 'education-item';
                newEducation.innerHTML = `
                    <input type="text" class="edu-degree" placeholder="المؤهل الدراسي" value="${edu.degree}">
                    <input type="text" class="edu-institution" placeholder="اسم المؤسسة التعليمية" value="${edu.institution}">
                    <input type="text" class="edu-period" placeholder="سنة التخرج" value="${edu.period}">
                    <textarea class="edu-details" placeholder="التفاصيل الإضافية" rows="2">${edu.details}</textarea>
                    <button type="button" class="remove-btn" onclick="removeEducation(this)">
                        <i class="fas fa-trash"></i> حذف المؤهل
                    </button>
                `;
                educationsDiv.appendChild(newEducation);
            });
            
            // تعبئة المهارات
            const skillsContainer = document.getElementById('skills-container');
            skillsContainer.innerHTML = '';
            data.skills.forEach(skill => {
                const newSkill = document.createElement('div');
                newSkill.className = 'skill-item';
                newSkill.innerHTML = `
                    <input type="text" class="skill-input" placeholder="المهارة" value="${skill.name}">
                    <select class="skill-level">
                        <option value="">مستوى المهارة</option>
                        <option value="مبتدئ" ${skill.level === 'مبتدئ' ? 'selected' : ''}>مبتدئ</option>
                        <option value="متوسط" ${skill.level === 'متوسط' ? 'selected' : ''}>متوسط</option>
                        <option value="متقدم" ${skill.level === 'متقدم' ? 'selected' : ''}>متقدم</option>
                        <option value="خبير" ${skill.level === 'خبير' ? 'selected' : ''}>خبير</option>
                    </select>
                    <button type="button" class="remove-btn" onclick="removeSkill(this)">
                        <i class="fas fa-trash"></i> حذف
                    </button>
                `;
                skillsContainer.appendChild(newSkill);
            });
            
            // تحديث المعاينة
            updatePreview();
            
            // إظهار رسالة نجاح
            showToast('تم تحميل البيانات النموذجية بنجاح!', 'success');
        }

        // مسح جميع البيانات
        function clearAllData() {
            if (confirm('هل أنت متأكد من رغبتك في مسح جميع البيانات؟')) {
                
                // مسح البيانات الشخصية
                document.getElementById('name').value = '';
                document.getElementById('email').value = '';
                document.getElementById('phone').value = '';
                document.getElementById('jobTitle').value = '';
                document.getElementById('location').value = '';
                document.getElementById('summary').value = '';
                
                // مسح الخبرات
                document.getElementById('experiences').innerHTML = `
                    <div class="experience-item">
                        <input type="text" class="exp-title" placeholder="المسمى الوظيفي">
                        <input type="text" class="exp-company" placeholder="اسم الشركة">
                        <input type="text" class="exp-period" placeholder="الفترة الزمنية (مثال: 2020 - 2023)">
                        <textarea class="exp-description" placeholder="المسؤوليات والإنجازات" rows="3"></textarea>
                        <button type="button" class="remove-btn" onclick="removeExperience(this)">
                            <i class="fas fa-trash"></i> حذف الخبرة
                        </button>
                    </div>
                `;
                
                // مسح التعليم
                document.getElementById('educations').innerHTML = `
                    <div class="education-item">
                        <input type="text" class="edu-degree" placeholder="المؤهل الدراسي">
                        <input type="text" class="edu-institution" placeholder="اسم المؤسسة التعليمية">
                        <input type="text" class="edu-period" placeholder="سنة التخرج">
                        <textarea class="edu-details" placeholder="التفاصيل الإضافية (اختياري)" rows="2"></textarea>
                        <button type="button" class="remove-btn" onclick="removeEducation(this)">
                            <i class="fas fa-trash"></i> حذف المؤهل
                        </button>
                    </div>
                `;
                
                // مسح المهارات
                document.getElementById('skills-container').innerHTML = `
                    <div class="skill-item">
                        <input type="text" class="skill-input" placeholder="المهارة (مثال: HTML, CSS, JavaScript)">
                        <select class="skill-level">
                            <option value="">مستوى المهارة</option>
                            <option value="مبتدئ">مبتدئ</option>
                            <option value="متوسط">متوسط</option>
                            <option value="متقدم">متقدم</option>
                            <option value="خبير">خبير</option>
                        </select>
                        <button type="button" class="remove-btn" onclick="removeSkill(this)">
                            <i class="fas fa-trash"></i> حذف
                        </button>
                    </div>
                `;
                
                // تحديث المعاينة
                updatePreview();
                
                // إظهار رسالة نجاح
                showToast('تم مسح جميع البيانات بنجاح!', 'success');
            }
        }

        // تحميل PDF باستخدام jsPDF
        function generatePDF() {
            // التأكد من أن مكتبة jsPDF متاحة
            if (typeof window.jspdf === 'undefined') {
                showToast('PDF library not loaded. Please try again.', 'error');
                return;
            }
            
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // إظهار رسالة تحميل
            showToast("جاري تحضير السيرة الذاتية للتحميل...", 'info');
            
            // استخدام html2canvas لالتقاط المحتوى
            const element = document.getElementById('cvPreview');
            
            html2canvas(element, {
                scale: 2, // زيادة الدقة
                useCORS: true,
                logging: false
            }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const imgWidth = doc.internal.pageSize.getWidth();
                const pageHeight = doc.internal.pageSize.getHeight();
                const imgHeight = canvas.height * imgWidth / canvas.width;
                let heightLeft = imgHeight;
                let position = 0;
                
                // إضافة الصورة الأولى
                doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;
                
                // إضافة صفحات إضافية إذا لزم الأمر
                while (heightLeft >= 0) {
                    position = heightLeft - imgHeight;
                    doc.addPage();
                    doc.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                }
                
                // حفظ الملف
                const fileName = 'سيرتي_الذاتية.pdf';
                doc.save(fileName);
                showToast('تم تحميل السيرة الذاتية بنجاح!', 'success');
            }).catch(error => {
                console.error('Error generating PDF:', error);
                showToast('حدث خطأ أثناء إنشاء ملف PDF. يرجى المحاولة مرة أخرى.', 'error');
            });
        }

        // تطبيق القالب المختار
        function applyTemplate(template) {
            const preview = document.getElementById('cvPreview');
            
            // إزالة جميع كلاسات القوالب
            preview.classList.remove('modern-template', 'professional-template', 'creative-template');
            
            // إضافة كلاس القالب المختار
            preview.classList.add(template + '-template');
        }

        // ========== مساعد الذكاء الاصطناعي ==========
        
        // إضافة رسالة إلى المحادثة
        function addMessage(text, isUser = false) {
            const assistantContent = document.getElementById('assistantContent');
            const messageDiv = document.createElement('div');
            messageDiv.className = `assistant-message ${isUser ? 'user' : 'bot'}`;
            messageDiv.textContent = text;
            assistantContent.appendChild(messageDiv);
            
            // التمرير إلى الأسفل
            assistantContent.scrollTop = assistantContent.scrollHeight;
        }
        
        // معالجة رسائل المستخدم
        function handleUserMessage() {
            const input = document.getElementById('assistantInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // إضافة رسالة المستخدم
            addMessage(message, true);
            
            // مسح حقل الإدخال
            input.value = '';
            
            // محاكاة تفكير المساعد
            setTimeout(() => {
                // إجابة المساعد بناءً على السؤال
                const response = generateAIResponse(message);
                addMessage(response);
            }, 1000);
        }
        
        // توليد ردود المساعد
        function generateAIResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // قائمة بالأسئلة الشائعة وإجاباتها
            const responses = {
                "كيف اكتب ملخص": "لكتابة ملخص احترافي:\n\n1. ابدأ بوصف موجز عن خبراتك الرئيسية\n2. أذكر إنجازاتك البارزة\n3. عبر عن أهدافك المهنية\n4. استخدم أفعال قوية مثل 'طورت'، 'قادت'، 'حسنت'\n5. اجعله مختصراً (3-5 جمل)\n\nمثال: 'مطور ويب بخبرة 5 سنوات في إنشاء تطبيقات ويب متقدمة. أسعى للانضمام إلى فريق ديناميكي حيث يمكنني تطبيق مهاراتي في React.js وNode.js'",
                "ما هي المهارات": "المهارات المهمة في السيرة الذاتية:\n\n• المهارات التقنية المتعلقة بالوظيفة\n• المهارات الشخصية مثل التواصل والعمل الجماعي\n• المهارات القيادية إذا كانت مناسبة\n• اللغات التي تتقنها\n• الشهادات والدورات\n\nنصيحة: رتب المهارات حسب أهميتها للوظيفة المستهدفة",
                "كم خبرة": "عدد الخبرات يعتمد على مستوى خبرتك:\n\n• للمبتدئين: 1-2 خبرة كافية\n• للمتوسطين: 2-3 خبرات\n• للمحترفين: 3-5 خبرات\n\nالأهم هو جودة الخبرات وليس كميتها. ركز على الخبرات الأكثر صلة بالوظيفة المستهدفة",
                "كيف أنظم": "لتنظيم السيرة الذاتية:\n\n1. المعلومات الشخصية الأساسية\n2. الملخص الاحترافي\n3. الخبرات العملية (من الأحدث إلى الأقدم)\n4. التعليم والمؤهلات\n5. المهارات\n6. اللغات والشهادات (اختياري)\n\nنصيحة: استخدم تنسيقاً متسقاً وخطاً واضحاً يسهل قراءته",
                "نصائح": "نصائح لسيرة ذاتية مميزة:\n\n• استخدم أفعال قوية لوصف إنجازاتك\n• ركز على النتائج والتأثير الذي حققته\n• استخدم أرقاماً ونسباً مئوية لتوضيح الإنجازات\n• تأكد من خلو السيرة من الأخطاء الإملائية\n• خصص السيرة لكل وظيفة تتقدم لها\n• احتفظ بالسيرة في صفحة واحدة إذا أمكن",
                "default": "يمكنني مساعدتك في:\n\n• كيفية كتابة ملخص احترافي\n• أفضل الطرق لعرض خبراتك\n• نصائح لتحسين مهاراتك\n• تنظيم السيرة الذاتية\n• أي استفسارات أخرى عن إنشاء السيرة الذاتية\n\nما هو سؤالك بالتحديد؟"
            };
            
            // البحث عن أفضل تطابق
            for (const [key, response] of Object.entries(responses)) {
                if (lowerMessage.includes(key)) {
                    return response;
                }
            }
            
            // إذا لم يتم العثور على تطابق، استخدم الرد الافتراضي
            return responses.default;
        }

        // ========== تهيئة الصفحة ==========

        // تأثيرات التمرير
        function checkScroll() {
            const fadeElements = document.querySelectorAll('.fade-in');
            fadeElements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                const windowHeight = window.innerHeight;
                if (elementTop < windowHeight - 100) {
                    element.classList.add('visible');
                }
            });
            
            // تأثير الشريط العلوي عند التمرير
            const nav = document.getElementById('mainNav');
            if (window.scrollY > 50) {
                nav.classList.add('scrolled');
            } else {
                nav.classList.remove('scrolled');
            }
        }
        
        // تحديث الشريط العلوي عند التمرير
        window.addEventListener('scroll', function() {
            checkScroll();
            
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrollPercent = (scrollTop / scrollHeight) * 100;
            document.getElementById('navProgress').style.width = scrollPercent + '%';
        });
        
        // التحقق من العناصر عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            checkScroll();
            
            // تحميل البيانات المحفوظة
            const savedCV = localStorage.getItem('cvData');
            if (savedCV) {
                const cvData = JSON.parse(savedCV);
                loadCVData(cvData);
            }
            
            // تحديث الاكتمال عند التحميل
            updateCompleteness();
            
            // إعداد المساعد
            document.getElementById('assistantToggle').addEventListener('click', function() {
                const panel = document.getElementById('assistantPanel');
                panel.style.display = panel.style.display === 'flex' ? 'none' : 'flex';
                
                // إذا كان يتم فتح المساعد لأول مرة، أضف رسالة الترحيب
                if (panel.style.display === 'flex' && document.querySelectorAll('.assistant-message').length === 0) {
                    addMessage("مرحباً! أنا مساعدك الذكي لإنشاء السيرة الذاتية. يمكنني مساعدتك في:\n\n• كيفية كتابة ملخص احترافي\n• أفضل الطرق لعرض خبراتك\n• نصائح لتحسين مهاراتك\n• إجابة أي أسئلة لديك عن إنشاء السيرة الذاتية\n\nما الذي تحتاج مساعدة فيه؟");
                }
            });
            
            document.getElementById('closeAssistant').addEventListener('click', function() {
                document.getElementById('assistantPanel').style.display = 'none';
            });
            
            // إرسال الرسالة عند الضغط على Enter
            document.getElementById('assistantInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleUserMessage();
                }
            });
            
            // إرسال الرسالة عند النقر على زر الإرسال
            document.getElementById('assistantSend').addEventListener('click', handleUserMessage);
            
            // اختيار القالب
            document.querySelectorAll('.template-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.template-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // تطبيق القالب المختار
                    const template = this.getAttribute('data-template');
                    applyTemplate(template);
                });
            });

            // التمرير السلس للروابط
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth'
                        });
                    }
                });
            });
        });
    </script>
</body>
</html>
